---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: slackintegrations.uptimerobot.com
spec:
  group: uptimerobot.com
  names:
    kind: SlackIntegration
    listKind: SlackIntegrationList
    plural: slackintegrations
    singular: slackintegration
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.ready
      name: Ready
      type: boolean
    - jsonPath: .status.type
      name: Type
      type: string
    - jsonPath: .status.id
      name: ID
      type: string
    - jsonPath: .spec.integration.friendlyName
      name: Friendly Name
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: SlackIntegration is the Schema for the slackintegrations API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: SlackIntegrationSpec defines the desired state of SlackIntegration.
            properties:
              account:
                description: Account references this object's Account. If not specified,
                  the default will be used.
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              integration:
                description: Integration configures the Slack integration settings.
                properties:
                  customValue:
                    description: CustomValue is optional text appended to each notification
                      payload.
                    maxLength: 5000
                    type: string
                  enableNotificationsFor:
                    default: UpAndDown
                    description: EnableNotificationsFor controls which events trigger
                      notifications.
                    enum:
                    - UpAndDown
                    - Down
                    - Up
                    - None
                    type: string
                  friendlyName:
                    description: FriendlyName is the display name shown in UptimeRobot.
                    maxLength: 60
                    type: string
                  secretName:
                    description: |-
                      SecretName is the secret containing the webhook URL.
                      If set, WebhookURL must be omitted.
                    type: string
                  sslExpirationReminder:
                    description: SSLExpirationReminder enables notifications for SSL/Domain
                      expiry checks.
                    type: boolean
                  webhookURL:
                    description: WebhookURL is the Slack webhook URL.
                    maxLength: 1500
                    type: string
                  webhookURLKey:
                    default: webhookURL
                    description: WebhookURLKey is the key in the secret containing
                      the webhook URL.
                    type: string
                type: object
                x-kubernetes-validations:
                - message: either webhookURL or secretName must be specified
                  rule: (has(self.webhookURL) && self.webhookURL != "") || (has(self.secretName)
                    && self.secretName != "")
                - message: specify only one of webhookURL or secretName
                  rule: '!(has(self.webhookURL) && self.webhookURL != "" && has(self.secretName)
                    && self.secretName != "")'
              prune:
                default: true
                description: Prune enables garbage collection.
                type: boolean
              syncInterval:
                default: 24h
                description: SyncInterval defines how often the operator reconciles
                  with the UptimeRobot API.
                type: string
            required:
            - integration
            - prune
            type: object
          status:
            description: SlackIntegrationStatus defines the observed state of SlackIntegration.
            properties:
              id:
                description: ID is the UptimeRobot integration ID.
                type: string
              ready:
                type: boolean
              type:
                description: Type is the UptimeRobot integration type (e.g. Slack).
                type: string
            required:
            - ready
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}

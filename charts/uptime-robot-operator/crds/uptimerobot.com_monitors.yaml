---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.17.2
  name: monitors.uptimerobot.com
spec:
  group: uptimerobot.com
  names:
    kind: Monitor
    listKind: MonitorList
    plural: monitors
    singular: monitor
  scope: Namespaced
  versions:
  - additionalPrinterColumns:
    - jsonPath: .status.ready
      name: Ready
      type: boolean
    - jsonPath: .spec.monitor.type
      name: Type
      type: string
    - jsonPath: .spec.monitor.name
      name: Friendly Name
      type: string
    - jsonPath: .spec.monitor.url
      name: URL
      priority: 1
      type: string
    - jsonPath: .status.heartbeatURL
      name: Heartbeat URL
      priority: 1
      type: string
    - jsonPath: .metadata.creationTimestamp
      name: Age
      type: date
    name: v1alpha1
    schema:
      openAPIV3Schema:
        description: Monitor is the Schema for the monitors API.
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: MonitorSpec defines the desired state of Monitor.
            properties:
              account:
                description: Account references this object's Account. If not specified,
                  the default will be used.
                properties:
                  name:
                    default: ""
                    description: |-
                      Name of the referent.
                      This field is effectively required, but due to backwards compatibility is
                      allowed to be empty. Instances of this type with an empty value here are
                      almost certainly wrong.
                      More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                    type: string
                type: object
                x-kubernetes-map-type: atomic
              contacts:
                default:
                - {}
                items:
                  description: MonitorContactRef attaches alert contacts. If blank,
                    the default will be used.
                  properties:
                    name:
                      default: ""
                      description: |-
                        Name of the referent.
                        This field is effectively required, but due to backwards compatibility is
                        allowed to be empty. Instances of this type with an empty value here are
                        almost certainly wrong.
                        More info: https://kubernetes.io/docs/concepts/overview/working-with-objects/names/#names
                      type: string
                    recurrence:
                      description: |-
                        Recurrence defines the number of minutes between a repeat notification.
                        A value of 0, disables repeat notifications.
                      type: string
                    threshold:
                      default: 1m
                      description: Threshold defines the number of minutes to wait
                        to notify.
                      type: string
                  type: object
                  x-kubernetes-map-type: atomic
                type: array
              heartbeatURLPublish:
                description: |-
                  HeartbeatURLPublish configures publishing the generated heartbeat URL to a Secret or ConfigMap.
                  This is only applied for Heartbeat monitor types.
                properties:
                  key:
                    default: heartbeatURL
                    description: Key is the data key containing the heartbeat URL.
                    maxLength: 253
                    minLength: 1
                    pattern: ^[A-Za-z0-9._-]+$
                    type: string
                  name:
                    description: |-
                      Name is the target Secret/ConfigMap name.
                      Defaults to "<monitor-name>-heartbeat-url".
                    maxLength: 253
                    pattern: ^[a-z0-9]([-.a-z0-9]*[a-z0-9])?$
                    type: string
                  type:
                    default: Secret
                    description: Type chooses where to publish the heartbeat URL.
                    enum:
                    - Secret
                    - ConfigMap
                    type: string
                type: object
              monitor:
                description: Monitor configures the Uptime Robot monitor.
                properties:
                  auth:
                    description: Auth enables monitor auth.
                    properties:
                      password:
                        type: string
                      passwordKey:
                        type: string
                      secretName:
                        type: string
                      type:
                        default: Basic
                        enum:
                        - Basic
                        - Digest
                        type: string
                      username:
                        type: string
                      usernameKey:
                        type: string
                    required:
                    - type
                    type: object
                  checkSSLErrors:
                    description: CheckSSLErrors enables checking for SSL and domain
                      expiration errors.
                    type: boolean
                  customHttpHeaders:
                    additionalProperties:
                      type: string
                    description: CustomHTTPHeaders are custom HTTP headers to be sent
                      in the request.
                    type: object
                  dns:
                    description: DNS provides configuration for the DNS monitor type.
                    properties:
                      a:
                        description: A records - expected IPv4 addresses.
                        items:
                          type: string
                        type: array
                      aaaa:
                        description: AAAA records - expected IPv6 addresses.
                        items:
                          type: string
                        type: array
                      cname:
                        description: CNAME records - expected canonical names.
                        items:
                          type: string
                        type: array
                      mx:
                        description: MX records - expected mail exchange records.
                        items:
                          type: string
                        type: array
                      ns:
                        description: NS records - expected nameserver records.
                        items:
                          type: string
                        type: array
                      ptr:
                        description: PTR records - expected pointer records.
                        items:
                          type: string
                        type: array
                      soa:
                        description: SOA records - expected start of authority records.
                        items:
                          type: string
                        type: array
                      spf:
                        description: SPF records - expected sender policy framework
                          records.
                        items:
                          type: string
                        type: array
                      srv:
                        description: SRV records - expected service records.
                        items:
                          type: string
                        type: array
                      sslExpirationPeriodDays:
                        description: |-
                          SSLExpirationPeriodDays - get notified X days before SSL expiration.
                          Maximum 10 items, each 0-365.
                        items:
                          type: integer
                        maxItems: 10
                        type: array
                      txt:
                        description: TXT records - expected text records.
                        items:
                          type: string
                        type: array
                    type: object
                  domainExpirationReminder:
                    description: DomainExpirationReminder enables notification when
                      the domain is about to expire.
                    type: boolean
                  followRedirections:
                    description: FollowRedirections enables following HTTP redirections.
                    type: boolean
                  gracePeriod:
                    default: 60s
                    description: |-
                      GracePeriod is the time to wait before sending an alert after the monitor goes down.
                      Maximum value is 24 hours (86400 seconds).
                    type: string
                  groupId:
                    description: GroupID is the monitor group ID to assign the monitor
                      to. 0 means no group.
                    type: integer
                  heartbeat:
                    description: Heartbeat provides configuration for the Heartbeat
                      monitor type.
                    properties:
                      interval:
                        default: 60s
                        description: |-
                          Interval is the expected interval between heartbeats.
                          If no heartbeat is received within this interval, an alert is triggered.
                        type: string
                    type: object
                  interval:
                    default: 60s
                    description: Interval is the monitoring interval.
                    type: string
                  keyword:
                    description: Keyword provides configuration for the Keyword monitor
                      type.
                    properties:
                      caseSensitive:
                        default: false
                        type: boolean
                      type:
                        enum:
                        - Exists
                        - NotExists
                        type: string
                      value:
                        type: string
                    required:
                    - type
                    - value
                    type: object
                  maintenanceWindowIds:
                    description: MaintenanceWindowIDs are the maintenance window IDs
                      to be assigned to the monitor.
                    items:
                      type: integer
                    type: array
                  method:
                    default: HEAD
                    description: Method defines the HTTP verb to use.
                    enum:
                    - HEAD
                    - GET
                    - POST
                    - PUT
                    - PATCH
                    - DELETE
                    - OPTIONS
                    type: string
                  name:
                    description: Name sets the name that is shown in Uptime Robot.
                    type: string
                  port:
                    description: Port provides configuration for the Port monitor
                      type.
                    properties:
                      number:
                        description: Number is the port number to monitor (0-65535).
                        maximum: 65535
                        minimum: 0
                        type: integer
                    required:
                    - number
                    type: object
                  post:
                    description: POST configures POST, PUT, PATCH, DELETE, and OPTIONS
                      requests.
                    properties:
                      contentType:
                        default: text/html
                        description: ContentType sets the Content-Type header for
                          POST, PUT, PATCH, DELETE, and OPTIONS requests.
                        enum:
                        - text/html
                        - application/json
                        type: string
                      postType:
                        default: KeyValue
                        description: Type defines the format of data to be sent with
                          POST, PUT, PATCH, DELETE, and OPTIONS requests.
                        enum:
                        - KeyValue
                        - RawData
                        type: string
                      value:
                        description: Value is the JSON form of data to be sent with
                          POST, PUT, PATCH, DELETE, and OPTIONS requests.
                        type: string
                    type: object
                  region:
                    description: Region for monitoring.
                    enum:
                    - na
                    - eu
                    - as
                    - oc
                    type: string
                  responseTimeThreshold:
                    description: ResponseTimeThreshold in milliseconds. Response time
                      over this threshold triggers an incident.
                    maximum: 60000
                    minimum: 0
                    type: integer
                  sslExpirationReminder:
                    description: SSLExpirationReminder enables notification when the
                      SSL certificate is about to expire.
                    type: boolean
                  status:
                    default: 1
                    description: Status toggles pause status for the monitor. 0 is
                      paused, 1 is running.
                    type: integer
                  successHttpResponseCodes:
                    description: |-
                      SuccessHTTPResponseCodes defines success HTTP response codes.
                      Can contain specific codes or ranges like "2xx". Default is ["2xx", "3xx"].
                    items:
                      type: string
                    type: array
                  tags:
                    description: Tags to be assigned to the monitor for organisation.
                    items:
                      type: string
                    type: array
                  timeout:
                    default: 30s
                    description: Timeout is the monitor timeout. Only for HTTP, Keyword
                      and Port monitors.
                    type: string
                  type:
                    default: HTTPS
                    description: Type chooses the monitor type.
                    enum:
                    - HTTPS
                    - Keyword
                    - Ping
                    - Port
                    - Heartbeat
                    - DNS
                    type: string
                  url:
                    description: |-
                      URL is the URL or IP to monitor, including the scheme.
                      Not required for Heartbeat monitors - UptimeRobot generates the webhook URL.
                      For DNS monitors: DNS server IP or hostname (e.g., 8.8.8.8).
                    type: string
                required:
                - name
                type: object
                x-kubernetes-validations:
                - message: Keyword config is required if type is Keyword
                  rule: self.type != 'Keyword' || has(self.keyword)
                - message: Port config is required if type is Port
                  rule: self.type != 'Port' || has(self.port)
                - message: DNS config is required if type is DNS
                  rule: self.type != 'DNS' || has(self.dns)
                - message: URL is required for non-Heartbeat monitor types
                  rule: self.type == 'Heartbeat' || (has(self.url) && self.url !=
                    '')
              prune:
                default: true
                description: Prune enables garbage collection.
                type: boolean
              sourceRef:
                description: SourceRef optionally references the object that created
                  this Monitor.
                properties:
                  apiGroup:
                    description: |-
                      APIGroup is the group for the resource being referenced.
                      If APIGroup is not specified, the specified Kind must be in the core API group.
                      For any other third-party types, APIGroup is required.
                    type: string
                  kind:
                    description: Kind is the type of resource being referenced
                    type: string
                  name:
                    description: Name is the name of resource being referenced
                    type: string
                required:
                - kind
                - name
                type: object
                x-kubernetes-map-type: atomic
              syncInterval:
                default: 24h
                description: |-
                  SyncInterval defines how often the operator reconciles with the UptimeRobot API.
                  This controls drift detection frequency. Lower values mean faster detection of
                  external changes but more API calls.
                type: string
            required:
            - monitor
            - prune
            type: object
          status:
            description: MonitorStatus defines the observed state of Monitor.
            properties:
              conditions:
                description: Conditions represent the latest available observations
                  of the resource's state
                items:
                  description: Condition contains details for one aspect of the current
                    state of this API Resource.
                  properties:
                    lastTransitionTime:
                      description: |-
                        lastTransitionTime is the last time the condition transitioned from one status to another.
                        This should be when the underlying condition changed.  If that is not known, then using the time when the API field changed is acceptable.
                      format: date-time
                      type: string
                    message:
                      description: |-
                        message is a human readable message indicating details about the transition.
                        This may be an empty string.
                      maxLength: 32768
                      type: string
                    observedGeneration:
                      description: |-
                        observedGeneration represents the .metadata.generation that the condition was set based upon.
                        For instance, if .metadata.generation is currently 12, but the .status.conditions[x].observedGeneration is 9, the condition is out of date
                        with respect to the current state of the instance.
                      format: int64
                      minimum: 0
                      type: integer
                    reason:
                      description: |-
                        reason contains a programmatic identifier indicating the reason for the condition's last transition.
                        Producers of specific condition types may define expected values and meanings for this field,
                        and whether the values are considered a guaranteed API.
                        The value should be a CamelCase string.
                        This field may not be empty.
                      maxLength: 1024
                      minLength: 1
                      pattern: ^[A-Za-z]([A-Za-z0-9_,:]*[A-Za-z0-9_])?$
                      type: string
                    status:
                      description: status of the condition, one of True, False, Unknown.
                      enum:
                      - "True"
                      - "False"
                      - Unknown
                      type: string
                    type:
                      description: type of condition in CamelCase or in foo.example.com/CamelCase.
                      maxLength: 316
                      pattern: ^([a-z0-9]([-a-z0-9]*[a-z0-9])?(\.[a-z0-9]([-a-z0-9]*[a-z0-9])?)*/)?(([A-Za-z0-9][-A-Za-z0-9_.]*)?[A-Za-z0-9])$
                      type: string
                  required:
                  - lastTransitionTime
                  - message
                  - reason
                  - status
                  - type
                  type: object
                type: array
              heartbeatURL:
                description: |-
                  HeartbeatURL contains the webhook URL for Heartbeat monitors.
                  This URL is generated by UptimeRobot after monitor creation.
                  Services should send periodic requests to this URL to indicate they are alive.
                  Format: {base}/m{id}-{token} where base defaults to
                  https://heartbeat.uptimerobot.com and can be overridden by
                  UPTIMEROBOT_HEARTBEAT_BASE_URL.
                type: string
              heartbeatURLPublishTargetKey:
                description: HeartbeatURLPublishTargetKey stores the key currently
                  managed by the operator.
                type: string
              heartbeatURLPublishTargetName:
                description: HeartbeatURLPublishTargetName stores the target Secret/ConfigMap
                  name currently managed by the operator.
                type: string
              heartbeatURLPublishTargetType:
                description: HeartbeatURLPublishTargetType stores where the heartbeat
                  URL is currently published.
                enum:
                - Secret
                - ConfigMap
                type: string
              id:
                type: string
              observedGeneration:
                description: ObservedGeneration is the most recent generation observed
                  by the controller
                format: int64
                type: integer
              ready:
                type: boolean
              status:
                type: integer
              type:
                enum:
                - HTTPS
                - Keyword
                - Ping
                - Port
                - Heartbeat
                - DNS
                type: string
            required:
            - ready
            type: object
        type: object
    served: true
    storage: true
    subresources:
      scale:
        specReplicasPath: .spec.monitor.status
        statusReplicasPath: .status.status
      status: {}
